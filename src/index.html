<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salions Matr√≠culas - An√°lisis de Accesos</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üèòÔ∏è Salions Matr√≠culas</h1>
            <p>An√°lisis de permisos de acceso vehicular</p>
        </header>

        <main class="main">
            <!-- Secci√≥n de carga de archivo -->
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Cargar archivo CSV</h3>
                        <p>Arrastra tu archivo aqu√≠ o haz clic para seleccionar</p>
                        <input type="file" id="fileInput" accept=".csv" hidden>
                    </div>
                </div>
                <div class="file-info" id="fileInfo" style="display: none;">
                    <span class="file-name" id="fileName"></span>
                    <span class="file-size" id="fileSize"></span>
                </div>
            </section>

            <!-- Secci√≥n de resumen -->
            <section class="summary-section" id="summarySection" style="display: none;">
                <h2>üìä Resumen del an√°lisis</h2>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="card-value" id="totalRecords">0</div>
                        <div class="card-label">Total registros</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-value" id="totalMembers">0</div>
                        <div class="card-label">Socios √∫nicos</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-value" id="totalPlates">0</div>
                        <div class="card-label">Matr√≠culas √∫nicas</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-value" id="avgPlatesPerMember">0</div>
                        <div class="card-label">Promedio matr√≠culas/socio</div>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n de filtros -->
            <section class="filters-section" id="filtersSection" style="display: none;">
                <h2>üîç Filtros de an√°lisis</h2>
                <div class="filters-container">
                    <div class="filter-group">
                        <label for="platesThreshold">M√≠nimo matr√≠culas:</label>
                        <input type="number" id="platesThreshold" min="1" value="5">
                    </div>
                    <div class="filter-group">
                        <label for="dateRange">Periodo:</label>
                        <select id="dateRange">
                            <option value="all">Todo el periodo</option>
                            <option value="30">√öltimos 30 d√≠as</option>
                            <option value="90">√öltimos 90 d√≠as</option>
                            <option value="180">√öltimos 6 meses</option>
                            <option value="365">√öltimo a√±o</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="seasonFilter">Temporada:</label>
                        <select id="seasonFilter">
                            <option value="all">Todas</option>
                            <option value="winter">Invierno</option>
                            <option value="spring">Primavera</option>
                            <option value="summer">Verano</option>
                            <option value="autumn">Oto√±o</option>
                        </select>
                    </div>
                    <button id="applyFilters" class="btn-primary">Aplicar filtros</button>
                    <button id="resetFilters" class="btn-secondary">Resetear</button>
                </div>
            </section>

            <!-- Secci√≥n de resultados -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="results-header">
                    <h2>üìã Resultados del an√°lisis</h2>
                    <div class="results-actions">
                        <button id="exportResults" class="btn-secondary">üíæ Exportar resultados</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="resultsTable" class="results-table">
                        <thead>
                            <tr>
                                <th data-sort="socio" title="Nombre del socio que solicita los permisos de acceso">
                                    <span class="header-text">
                                        Socio
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                                <th data-sort="totalMatriculas" title="N√∫mero total de matr√≠culas registradas por el socio (permanentes + temporales)">
                                    <span class="header-text multiline">
                                        <span class="line-1">
                                            Total
                                            <span class="sort-indicator"></span>
                                        </span>
                                    </span>
                                </th>
                                <th data-sort="diasPromedioPermiso" title="Promedio de d√≠as de duraci√≥n de los permisos temporales solicitados">
                                    <span class="header-text">
                                        D√≠as por permiso
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                                <th data-sort="frecuenciaEstacional" title="Frecuencia promedio mensual de solicitudes en verano (‚òÄÔ∏è) e invierno (‚ùÑÔ∏è)">
                                    <span class="header-text multiline">
                                        <span class="line-1">
                                            Permisos por mes
                                            <span class="sort-indicator"></span>
                                        </span>
                                    </span>
                                </th>
                                <th data-sort="permisosCortos" title="Cantidad de permisos de 7 d√≠as o menos (posible indicador de uso abusivo)">
                                    <span class="header-text">
                                        Permisos ‚â§ 7 d√≠as
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                                <th data-sort="solapamientos" title="N√∫mero de veces que el socio tiene m√∫ltiples matr√≠culas activas simult√°neamente">
                                    <span class="header-text">
                                        Solap.
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                                <th data-sort="picoSimultaneo" title="M√°ximo n√∫mero de matr√≠culas que el socio ha tenido activas al mismo tiempo">
                                    <span class="header-text">
                                        Pico Simul.
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                                <th data-sort="matriculas" title="Lista completa de todas las matr√≠culas registradas por el socio con sus detalles">
                                    <span class="header-text">
                                        Matr√≠culas
                                        <span class="sort-indicator"></span>
                                    </span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody">
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="pagination" style="display: none;">
                    <button id="prevPage" class="btn-secondary">‚ùÆ Anterior</button>
                    <span id="pageInfo"></span>
                    <button id="nextPage" class="btn-secondary">Siguiente ‚ùØ</button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>¬© 2025 Salions Matr√≠culas - An√°lisis local de datos</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/csv-parser.js"></script>
    <script src="js/data-analyzer.js"></script>
    <script src="js/ui-components.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
